<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="ee.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> Simulator</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE CLASS="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1">
<TR>
<TH COLSPAN="3" ALIGN="center">
<P CLASS="Gotos">
Simulator</P>
</TH></TR>
<TR><TD  ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-15.html">
To&nbsp;main&nbsp;page</A>
</P></TD>
<TD  ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-21.html">
To&nbsp;previous&nbsp;page</A></P></TD>
<TD ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-23.html">
To&nbsp;next&nbsp;page</A></P>
</TD>
</TR></TABLE>
<P ALIGN="LEFT">&nbsp;</P>
<BR>
<BR>
<HR ALIGN="center">
</DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId-601428"></A><A NAME="19399"></A>Simulator</H2>
<H3 CLASS="Heading2">
<A NAME="pgfId-803829"></A><A NAME="25745"></A>Simulator theory of operation</H3>
<P CLASS="Body">
<A NAME="pgfId-803830"></A>This section provides an overview of how the different tools provided in the SKY simulation environment work together. It specifies the major components of the simulator and describes the behavior of the hardware elements under the simulator.</P>
<H4 CLASS="Heading3">
<A NAME="pgfId-803831"></A>Building an executable</H4>
<P CLASS="Body">
<A NAME="pgfId-803832"></A>The simulation runs a single Emotion Engine executable. To produce this file, several input files are compiled with one or more of the Emotion Engine assembler, the Emotion Engine <A NAME="marker-803833"></A>GCC and <A NAME="marker-803834"></A>G++ compilers, and the DVP assembler.</P>
<P CLASS="Body">
<A NAME="pgfId-803957"></A>&nbsp;</P>
<DIV>
<MAP NAME="ee-10">
</MAP>
<IMG SRC="ee-10.gif" USEMAP="#ee-10">
</DIV>
<H4 CLASS="Heading3">
<A NAME="pgfId-803958"></A>DVP assembler</H4>
<P CLASS="Body">
<A NAME="pgfId-803959"></A>A DVP assembler is provided. For a detailed description of the assembler format, refer to <A HREF="ee-19.html#32461" CLASS="XRef">DVP Assembler</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-803963"></A>The following diagram displays the default output from the assembler:</P>
<P CLASS="Body">
<A NAME="pgfId-803983"></A>&nbsp;</P>
<DIV>
<MAP NAME="ee-11">
</MAP>
<IMG SRC="ee-11.gif" USEMAP="#ee-11">
</DIV>
<P CLASS="BodyHang1">
<A NAME="pgfId-803984"></A>Input</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-803985"></A>Assembly language source file (may contain DMA tags, GIF tags, VIF instructions and VU instructions). </P>
<P CLASS="BodyHang1">
<A NAME="pgfId-803986"></A>Output</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-803987"></A>ELF object file that is linkable with Emotion Engine ELF objects to create a Emotion Engine ELF executable. By default, the ELF object file resides in the current working directory. You can modify the generated object file name and destination location via command line options.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-803988"></A>The assembler has an option to ignore DMA tags and VIF instructions putting out only the VU instructions. A second option causes the assembler to ignore only DMA tags. For more information, refer to <A HREF="ee-19.html#32461" CLASS="XRef">DVP Assembler</A>.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-803992"></A>You can create a binary-only version of the VU code from the object file by using the <TT CLASS="Code">
objcopy -output-target=binary</TT>
 command or the <TT CLASS="Code">
ld -oformat binary</TT>
 command.</P>
<H4 CLASS="Heading3">
<A NAME="pgfId-803993"></A>Simulator trace files</H4>
<P CLASS="Body">
<A NAME="pgfId-803994"></A>The trace files are text files that contain disassembly of the input streams to VIF0, VIF1, GIF and the GS library. </P>
<P CLASS="Body">
<A NAME="pgfId-803995"></A>The GIF disassembly contains all GIF tags and quadwords sent to GIF on the requested path(s). The path(s) transferring the data will be identified with a comment beside the GIF tag. The GIF tags and data will appear in the sequence that the data is executed, not received. Disassembly of transfers along <TT CLASS="Code">
path1</TT>
 and <TT CLASS="Code">
path2</TT>
 are provided for information purposes only. To send <TT CLASS="Code">
path1</TT>
 and <TT CLASS="Code">
path2</TT>
 information to GIF, use the disassembly file generated by the <TT CLASS="Code">
--log vif1=on</TT>
<A NAME="marker-803996"></A> option. The disassembly of <TT CLASS="Code">
path3</TT>
 transfers can be assembled and sent to GIF using the <TT CLASS="Code">
re-dma.c</TT>
 sample program with the <TT CLASS="Code">
-DGIF</TT>
 option.</P>
<P CLASS="Body">
<A NAME="pgfId-803997"></A>The GS trace file contains all input from GIF in hexadecimal form, in the following format:</P>
<P CLASS="CodeExample">
<A NAME="pgfId-803998"></A><TT CLASS="Code">
gs-register</TT>
 hi-order-32-bits low-order-32-bits </P>
<P CLASS="CodeExample">
<A NAME="pgfId-803999"></A>(for example, 04 00109c69 827784b8)</P>
<P CLASS="Body">
<A NAME="pgfId-804132"></A> &nbsp;</P>
<DIV>
<MAP NAME="ee-12">
</MAP>
<IMG SRC="ee-12.gif" USEMAP="#ee-12">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-804133"></A>You can specify whether or not to create these trace files by using command line options at simulator invocation (refer to <A HREF="ee-22.html#22649" CLASS="XRef">Emotion Engine-specific command-line options</A>). The default is not to trace the binary streams. </P>
<P CLASS="Body">
<A NAME="pgfId-804137"></A>If you choose to create trace files, you must specify the streams that you want to trace, using the <TT CLASS="Code">
--log</TT>
 option. If you do not specify the streams that you want to trace, you will receive an error. The trace files will be uniquely identified and placed in the current working directory. You can modify the trace file names and destination location via command line options.</P>
<P CLASS="Body">
<A NAME="pgfId-804138"></A>The GIF trace file contains data from 3 input paths with information regarding the path origin. You can filter out source paths from the GIF trace file.</P>
<P CLASS="Body">
<A NAME="pgfId-804139"></A>A mechanism is provided to turn on (or off) the trace facility once the simulator has been invoked. </P>
<H4 CLASS="Heading3">
<A NAME="pgfId-804141"></A><A NAME="22705"></A>Subsystems A, B and C</H4>
<P CLASS="Body">
<A NAME="pgfId-804143"></A>All <A NAME="marker-804142"></A>subsystems are always present. However, each subsystem has file-like interfaces so that it can be run alone with suitable input files. Subsystem A consists of an Emotion Engine and VU0/VIF0. Subsystem B consists of VU1/VIF1 and GIF. On UNIX platforms only, there is also another subsystem, called Subsystem C, which consists of the GS library. Mechanisms are provided to run each subsystem in isolation.</P>
<H5 CLASS="Heading4">
<A NAME="pgfId-804145"></A>Simulating <A NAME="marker-804144"></A>Subsystem A in isolation.</H5>
<P CLASS="Body">
<A NAME="pgfId-804146"></A>The simulator itself is built as a single system. However, it allows a mode of operation that behaves as if Subsystem A is running in isolation. </P>
<P CLASS="Body">
<A NAME="pgfId-804147"></A>The simulator provides two options to allow this mode of behavior. The first option allows the creation of trace files from VIF1 and the GIF (as described in the previous two sections). The second option causes the simulator to not execute any VIF1 instructions. </P>
<P CLASS="Body">
<A NAME="pgfId-804148"></A>These two options together cause the simulator to behave as if Subsystem A was running in isolation.</P>
<P CLASS="Body">
<A NAME="pgfId-804172"></A>&nbsp;</P>
<DIV>
<MAP NAME="ee-13">
</MAP>
<IMG SRC="ee-13.gif" USEMAP="#ee-13">
</DIV>
<P CLASS="BodyHang1">
<A NAME="pgfId-804173"></A>Input</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804174"></A>Emotion Engine ELF executable. For example, the following command:</P>
<P CLASS="CodeExample">
<A NAME="pgfId-804178"></A>ee-run --log vif1=on --log gif3=on foo.exe</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804180"></A>executes <TT CLASS="Code">
foo.exe,</TT>
 producing a VIF1 and GIF Path 3 disassembly file. By default the resulting files will be called <TT CLASS="Code">
vif1.dvpasm</TT>
 and <TT CLASS="Code">
gif.dvpasm.</TT>
</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804181"></A>Output</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804182"></A>Two DVP assembler files containing the VIF1 and GIF Path 3 instructions. The DVP assembler can then assemble these files into ELF object files for use as input to Subsystem B.</P>
<H5 CLASS="Heading4">
<A NAME="pgfId-804185"></A>Simulating <A NAME="marker-804184"></A>Subsystem &quot;B&quot; in isolation</H5>
<P CLASS="Body">
<A NAME="pgfId-804186"></A>The simulator allows a mode of operation that simulates Subsystem B in isolation and is performed by linking a small Emotion Engine skeleton program (provided) with DMA/VU/VIF data created by the DVP assembler. The Emotion Engine program simply executes a DMA transfer to VIF1, and then waits for VU1 to finish.</P>
<P CLASS="Body">
<A NAME="pgfId-804187"></A>The input to the DVP assembler can be either a hand-created assembler file or it can be the output from the trace of VIF1.</P>
<P CLASS="Body">
<A NAME="pgfId-804220"></A>&nbsp;</P>
<DIV>
<MAP NAME="ee-14">
</MAP>
<IMG SRC="ee-14.gif" USEMAP="#ee-14">
</DIV>
<P CLASS="Body">
<A NAME="pgfId-804221"></A>The skeleton program is a C program called <TT CLASS="Code">
re-dma.c.</TT>
 This sample program demonstrates how a reassembled log file can be transmitted back to the unit that generated the log. This process allows examination and tweaking of a data stream.</P>
<P CLASS="Body">
<A NAME="pgfId-804222"></A>The <TT CLASS="Code">
re-dma.c</TT>
 sample code is provided as-is, without warranty of any kind. Compile with <TT CLASS="Code">
-DVIF1</TT>
 or <TT CLASS="Code">
-DGIF,</TT>
 as appropriate.</P>
<P CLASS="Body">
<A NAME="pgfId-804223"></A>A typical compile command might look as follows:</P>
<P CLASS="CodeExample">
<A NAME="pgfId-804227"></A>ee-gcc -DGIF re-dma.c gif.o -o re-dma16.run -Tsky.ld</P>
<P CLASS="Body">
<A NAME="pgfId-804229"></A>The following diagram displays the linker linking these files to create a Emotion Engine executable:</P>
<DIV>
<MAP NAME="ee-15">
</MAP>
<IMG SRC="ee-15.gif" USEMAP="#ee-15">
</DIV>
<P CLASS="BodyHang1">
<A NAME="pgfId-804260"></A>Input</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804261"></A>ELF object files and the provided Emotion Engine skeleton stub (in ELF object form). </P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804262"></A>Output</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804263"></A>An Emotion Engine ELF executable file. This file can be used to simulate the isolation of a subsystem (in the example, subsystem B) on a subsequent run of the simulator. The ELF executable file resides in the current working directory. You can modify the generated executable file name and destination location via command line options.</P>
<H5 CLASS="Heading4">
<A NAME="pgfId-804265"></A>Simulating <A NAME="marker-804264"></A>Subsystem C in isolation</H5>
<P CLASS="Body">
<A NAME="pgfId-806673"></A>Note that Subsystem C does not apply to Win32 platforms.</P>
<P CLASS="Body">
<A NAME="pgfId-804267"></A>The simulator allows a mode of operation that simulates Subsystem C in isolation, and is performed by sending the GS trace input to the GS library interface.</P>
<DIV>
<MAP NAME="ee-16">
</MAP>
<IMG SRC="ee-16.gif" USEMAP="#ee-16">
</DIV>
<P CLASS="BodyHang1">
<A NAME="pgfId-804286"></A>Input</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804287"></A>Text file containing GS registers and data from a simulator run. For example, the following:</P>
<P CLASS="CodeExample2">
<A NAME="pgfId-804291"></A>ee-run --log gs=on foo.exe</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804292"></A>executes <TT CLASS="Code">
foo.exe</TT>
, producing a GS input file. By default the resulting file will be named <TT CLASS="Code">
gsinput.dat</TT>
.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804293"></A>Output</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804294"></A>Screen display image.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId-538711"></A>Hardware component level <A NAME="marker-638312"></A>simulation</H3>
<P CLASS="Body">
<A NAME="pgfId-538712"></A>This section describes how the simulated environment differs from the actual hardware specifications.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804299"></A>Main Bus</P>
<UL>
<LI>
<A NAME="pgfId-804300"></A>Timing, contention and arbitration of the main bus are not simulated.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-804301"></A>DMAC</P>
<UL>
<LI>
<A NAME="pgfId-804302"></A>Timing of DMA transfers is not accurately simulated. A complete chain of DMA transfers takes place between two core CPU instructions, in the clock cycle after the CORE initiates a data transfer. </LI>
<LI>
<A NAME="pgfId-804303"></A>The simulator only supports DMA channels 0 - 2.</LI>
<LI>
<A NAME="pgfId-808444"></A>The simulator only supports DMA transfers <EM CLASS="Emphasis">
from</EM>
 main memory; it does not support DMA transfers <EM CLASS="Emphasis">
to</EM>
 main memory.</LI>
<LI>
<A NAME="pgfId-804304"></A>DMA stalls are not simulated. To allow this, all co-processor FIFOs are modeled as infinite length.</LI>
<LI>
<A NAME="pgfId-804305"></A>DMA transfers are not sliced.</LI>
<LI>
<A NAME="pgfId-804306"></A>Because of the restrictions above, some functions of the D_CTRL register are not accurately simulated:</LI>
<UL>
<UL>
<LI>
<A NAME="pgfId-804307"></A><TT CLASS="Code">
RELE</TT>
: cycle stealing does not apply to the model of DMA used.</LI>
<LI>
<A NAME="pgfId-804308"></A><TT CLASS="Code">
STS</TT>
, <TT CLASS="Code">
STD</TT>
: DMA transfers do not stall.</LI>
</UL>
</UL>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-804309"></A>Core Processor</P>
<UL>
<LI>
<A NAME="pgfId-804310"></A>Instruction timings are not cycle accurate.</LI>
<LI>
<A NAME="pgfId-804311"></A>Cache and scratch pad RAM (SPR) are not simulated.</LI>
<LI>
<A NAME="pgfId-804312"></A>The COP0 Random Register changes value on a cache miss, not every cycle.</LI>
<LI>
<A NAME="pgfId-804313"></A>The COP0 Count, Compare, PRId, Debug, Performance Counter, TagLo, and TagHi registers are not simulated.</LI>
<LI>
<A NAME="pgfId-804314"></A>COP2 macro-instructions execute in a non-pipelined fashion. Any in-progress VU0 instructions are first driven to completion. Then the macro-instruction is fed to the VU0 pipeline, and also driven to completion. This means that sequential COP2 macro-instructions act as if the VU0 pipeline was very fast and perfectly interlocked.</LI>
<LI>
<A NAME="pgfId-804315"></A><TT CLASS="Code">
CTC2</TT>
, <TT CLASS="Code">
QMTC2</TT>
, <TT CLASS="Code">
CFC2</TT>
, and <TT CLASS="Code">
QMFC2</TT>
 instructions without the interlock flag execute in a more realistic manner, because they do not drive in-progress VU0 instructions to completion.</LI>
<LI>
<A NAME="pgfId-804316"></A>All COP2 instructions produce &quot;illegal instruction&quot; exceptions unless the CU2 (enable COP2, #30) bit is set in the Emotion Engine status register.</LI>
<LI>
<A NAME="pgfId-804317"></A>Illegal COP2 instruction bit patterns are not specifically detected by the simulated Emotion Engine. Synthetic VU instructions are instead propagated to VU0, and are often detected as illegal there.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-804318"></A>FPU</P>
<UL>
<LI>
<A NAME="pgfId-804319"></A>The simulator has a runtime option (<TT CLASS="Code">
--float-type</TT>
) that allows it to use either IEEE arithmetic or hardware-accurate arithmetic.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-538728"></A>VIF0 and VIF1</P>
<UL>
<LI>
<A NAME="pgfId-538729"></A>All VIF operations are modeled to complete in one cycle, after stall conditions are cleared.</LI>
<LI>
<A NAME="pgfId-804325"></A><TT CLASS="Code">
VIF_NUM</TT>
 is maintained; however, because operations complete in one cycle, only the extreme values may be observed by the simulated Emotion Engine.</LI>
<LI>
<A NAME="pgfId-804326"></A><TT CLASS="Code">
VIF_STAT.PPS</TT>
 accurately indicates idle/stalled state. Active state is not observed by the Emotion Engine for the same reason as above.</LI>
<LI>
<A NAME="pgfId-804327"></A><TT CLASS="Code">
VIF_STAT.FQC</TT>
 counter value is 0 or 1 for empty or non-empty state.</LI>
<LI>
<A NAME="pgfId-804328"></A>The Emotion Engine can write units smaller than quadwords to the VIF FIFO addresses. However, these units are not inserted into the VIF FIFO until an entire quadword is written. For example, sixteen consecutive bytes may be written by Emotion Engine code to create one complete VIF quadword.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-804329"></A>VU0</P>
<UL>
<LI>
<A NAME="pgfId-804330"></A>The simulator has a runtime option (<TT CLASS="Code">
--float-type</TT>
) that allows it to use either IEEE arithmetic or hardware-accurate arithmetic.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-538736"></A>VU1</P>
<UL>
<LI>
<A NAME="pgfId-538737"></A>The simulator has a runtime option (<TT CLASS="Code">
--float-type</TT>
) that allows it to use either IEEE arithmetic or hardware-accurate arithmetic.</LI>
<LI>
<A NAME="pgfId-538738"></A>The <TT CLASS="Code">
XGKICK</TT>
 instruction runs to completion in a single VU1 instruction cycle.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-538739"></A>GIF</P>
<UL>
<LI>
<A NAME="pgfId-538740"></A>To prevent stalls, the GIF FIFO is of infinite length.</LI>
<LI>
<A NAME="pgfId-538741"></A>Timing of GIF transfers is not accurately simulated. Transfers of primitives complete in one cycle at the end of a primitive or IMT (image mode transfer) burst.</LI>
<LI>
<A NAME="pgfId-804335"></A>Reads of GIF register addresses are simulated for the following registers only: <TT CLASS="Code">
GIF_STAT</TT>
, <TT CLASS="Code">
GIF_P3CNT</TT>
 and <TT CLASS="Code">
GIF_P3TAG.</TT>
 Reads of non-simulated register addresses will return a zero value.</LI>
</UL>
<P CLASS="BodyHang1">
<A NAME="pgfId-538744"></A>GS library</P>
<UL>
<LI>
<A NAME="pgfId-804340"></A>On UNIX, local-host DMA transfers from the GS library to the main memory are not simulated.</LI>
<LI>
<A NAME="pgfId-804341"></A>On UNIX, reads of GS register addresses are not simulated and will return a zero value.</LI>
<LI>
<A NAME="pgfId-538747"></A>Writes to GS register addresses are simulated for the following registers only: <TT CLASS="Code">
GS_PMODE</TT>
, <TT CLASS="Code">
GS_DISPFB1</TT>
, <TT CLASS="Code">
GS_DISPLAY1</TT>
, <TT CLASS="Code">
GS_DISPFB2</TT>
 and <TT CLASS="Code">
GS_DISPLAY2.</TT>
</LI>
</UL>
<P CLASS="BodyListFollow">
<A NAME="pgfId-718409"></A>Note:  On Win32 systems, the call will only appear in the text file that is produced.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-538753"></A>General</P>
<UL>
<LI>
<A NAME="pgfId-538754"></A>Simulated devices are not reset upon the GDB <TT CLASS="Code">
run</TT>
 command. Simulator initialization occurs at the GDB <TT CLASS="Code">
target sim</TT>
 command only.</LI>
<LI>
<A NAME="pgfId-804346"></A>The following physical address ranges are used for internal purposes in the simulator. Emotion Engine user code should not use these addresses:</LI>
<UL>
<UL>
<LI>
<A NAME="pgfId-804347"></A><TT CLASS="Code">
0x19800000 - 0x1980FFFF</TT>
 [VU address tracking]</LI>
<LI>
<A NAME="pgfId-804348"></A><TT CLASS="Code">
0x11007000 - 0x110073FF</TT>
 [VU1 registers]</LI>
<LI>
<A NAME="pgfId-804349"></A><TT CLASS="Code">
0x10000C00 - 0x10000FFF</TT>
 [VU0 registers]</LI>
<LI>
<A NAME="pgfId-804350"></A><TT CLASS="Code">
0x10006000 - 0x1000602F</TT>
 [GIF]</LI>
<LI>
<A NAME="pgfId-804351"></A><TT CLASS="Code">
0x19810000 - 0x1981FFFF</TT>
 [VIF address tracking]</LI>
</UL>
</UL>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId-804352"></A>Registers</H3>
<P CLASS="Body">
<A NAME="pgfId-804356"></A>The SKY simulator supports both the thirty-two 128-bit general-purpose registers and the thirty-two 32-bit floating-point registers. In addition, the special registers: <TT CLASS="Code">
SA, FSR, FIR, HI</TT>
 and <TT CLASS="Code">
LO</TT>
 are also supported.</P>
<P CLASS="Body">
<A NAME="pgfId-804358"></A>By default, the simulator allocates 16MB of unified <A NAME="marker-804357"></A>memory at the address <TT CLASS="Code">
0xa0000000</TT>
. The 16MB block is replicated at <TT CLASS="Code">
0x80000000</TT>
 and at <TT CLASS="Code">
0x0.</TT>
</P>
<H3 CLASS="Heading2">
<A NAME="pgfId-493551"></A><A NAME="22649"></A>Emotion Engine-specific command-line options</H3>
<P CLASS="Body">
<A NAME="pgfId-488709"></A>The number of options available is extensive. The following is a summary of the most relevant options supported by the simulator.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-488710"></A><TT CLASS="Code">
--help</TT>
<A NAME="marker-515590"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804399"></A>Outputs a full list of simulator options. The following example shows only the first few lines of output.</P>
<TABLE>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804368"></A><STRONG CLASS="CodeOutput">
%</STRONG>
 <TT CLASS="Code">
ee</TT>
-run --help</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804370"></A><STRONG CLASS="CodeOutput">
Usage: ee-run [options] program [program args]</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804372"></A><STRONG CLASS="CodeOutput">
Options:</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804374"></A><STRONG CLASS="CodeOutput">
 --list-VIF0 [range]  Show VIF0 FIFO   (interactive mode only)</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804376"></A><STRONG CLASS="CodeOutput">
 --list-VIF1 [range]  Show VIF1 FIFO   (interactive mode only)</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804378"></A><STRONG CLASS="CodeOutput">
 --pipe [[vu]0|1]     Show VU pipeline (interactive mode only)</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804380"></A><STRONG CLASS="CodeOutput">
 --pipe-order wzyx|xyzw  Vector order in VU pipeline display</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804382"></A><STRONG CLASS="CodeOutput">
 -l all|gif|gif1|gif2|gif3|gs|vif0|vif1=on|off, </STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804384"></A><STRONG CLASS="CodeOutput">
 --log all|gif|gif1|gif2|gif3|gs|vif0|vif1=on|off</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804386"></A><STRONG CLASS="CodeOutput">
                          Unit disassembly/input logging</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804388"></A><STRONG CLASS="CodeOutput">
 --log-file gif|gs|vif0|vif1=FILENAME</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804390"></A><STRONG CLASS="CodeOutput">
                          Specify unit and file name for</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804392"></A><STRONG CLASS="CodeOutput">
                          disassembly/input logging</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804394"></A><STRONG CLASS="CodeOutput">
.</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804396"></A><STRONG CLASS="CodeOutput">
.</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-804398"></A><STRONG CLASS="CodeOutput">
.</STRONG>
</P>
</TD>
</TR>
</TABLE>
<P CLASS="BodyHang1">
<A NAME="pgfId-804405"></A><TT CLASS="Code">
--list-VIF0 [range]</TT>
<A NAME="marker-804404"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-535627"></A><TT CLASS="Code">
--list-VIF1 [range]</TT>
<A NAME="marker-535684"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804410"></A><TT CLASS="Code">
--pipe [[vu]0|1]</TT>
<A NAME="marker-535683"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-613085"></A><TT CLASS="Code">
--pipe-order wzyx|xyzw</TT>
<A NAME="marker-613092"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-614358"></A>These options are only used in interactive mode. For more information, see <A HREF="ee-21.html#17670" CLASS="XRef">Debugging the VUs</A> and <A HREF="ee-21.html#15524" CLASS="XRef">Debugging the VIF units</A>. </P>
<P CLASS="BodyHang1">
<A NAME="pgfId-535623"></A><TT CLASS="Code">
-l [all|gif|gif1|gif2|gif3|gs|vif0|vif1=on|off]</TT>
<A NAME="marker-532512"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532514"></A><TT CLASS="Code">
--log [all|gif|gif1|gif2|gif3|gs|vif0|vif1=on|off]</TT>
<A NAME="marker-535682"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532515"></A>Generates a readable log of instructions, or disassembly of the input, to a device.</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804436"></A><TT CLASS="Code">
all:  </TT>
generate all component level logs</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804437"></A><TT CLASS="Code">
gif:  </TT>
generate disassembly log of all GIF paths</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804438"></A><TT CLASS="Code">
gif1: </TT>
generate disassembly log of GIF PATH1 input only</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804439"></A><TT CLASS="Code">
gif2: </TT>
generate disassembly log of GIF PATH2 input only</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804440"></A><TT CLASS="Code">
gif3: </TT>
generate disassembly log of GIF PATH3 input only</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-532521"></A><TT CLASS="Code">
gs:   </TT>
generate GS input data log</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804445"></A><TT CLASS="Code">
vif0: </TT>
generate disassembly log of VIF0 input</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804446"></A><TT CLASS="Code">
vif1: </TT>
generate disassembly log of VIF1 input</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532524"></A>By default no log file is generated.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804451"></A>You can specify the log file names using the <TT CLASS="Code">
--log-file</TT>
 option.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532755"></A><TT CLASS="Code">
--log-file [gif|gs|vif0|vif1=</TT>
<A NAME="marker-532754"></A><VAR CLASS="CodeVariant">
filename</VAR>
]<TT CLASS="Code">
</TT>
</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532756"></A>Directs component-level logged output to a specified file.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532759"></A>All GIF data goes to one file, even if more than one path is specified. The default file names are as follows:</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804466"></A><TT CLASS="Code">
gif:  </TT>
<STRONG CLASS="CodeOutput">
gif.dvpasm</STRONG>
</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-532531"></A><TT CLASS="Code">
gs:   </TT>
<STRONG CLASS="CodeOutput">
gsinput.dat</STRONG>
</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804471"></A><TT CLASS="Code">
vif0: </TT>
<STRONG CLASS="CodeOutput">
vif0.dvpasm</STRONG>
</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-804473"></A><TT CLASS="Code">
vif1: </TT>
<STRONG CLASS="CodeOutput">
vif1.dvpasm</STRONG>
<TT CLASS="Code">
</TT>
<A NAME="marker-804472"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-613978"></A><TT CLASS="Code">
--float-type fast|accurate</TT>
<A NAME="marker-613977"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-804478"></A>Specifies whether Emotion Engine and VU floating point should be done in the host hardware or in a target-accurate software library.</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-613970"></A><TT CLASS="Code">
fast</TT>
:  host (default)</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-613971"></A><TT CLASS="Code">
accurate</TT>
:  target</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-613148"></A>The <TT CLASS="Code">
accurate </TT>
mode is much slower than the <TT CLASS="Code">
fast </TT>
mode.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-613135"></A><TT CLASS="Code">
--reset</TT>
<A NAME="marker-613146"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-613136"></A>Returns the following peripheral devices to their start-up state:  <TT CLASS="Code">
vu0, vu1, vif0, vif1, dmac, gif</TT>
 and <TT CLASS="Code">
gs</TT>
. Used in interactive mode only.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532662"></A><TT CLASS="Code">
--enable-gs [on|off]</TT>
<A NAME="marker-535681"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532674"></A>Alters the destination of the GIF output between the GS library and <TT CLASS="Code">
stdout</TT>
.</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-532675"></A><TT CLASS="Code">
on:   </TT>
GIF output goes to the GS library</P>
<P CLASS="BodyListFollow2">
<A NAME="pgfId-532676"></A><TT CLASS="Code">
off:  </TT>
GIF output goes to <TT CLASS="Code">
stdout</TT>
.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-718216"></A>Note:  On Win32, the <TT CLASS="Code">
--enable-gs</TT>
 option is a no-op (<TT CLASS="Code">
--enable-gs off </TT>
only).</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532704"></A><TT CLASS="Code">
--gs-refresh1 &lt;regAddress0=64bitValue:regAddress1=64bitValue&gt;</TT>
<A NAME="marker-532703"></A></P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532706"></A><TT CLASS="Code">
--gs-refresh2 &lt;regAddress0=64bitValue:regAddress1=64bitValue&gt;</TT>
<A NAME="marker-532705"></A></P>
<P CLASS="BodyHang1List">
<A NAME="pgfId-532707"></A>      User-defined GS display refresh buffers, which allow you to define the registers and values.</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532708"></A>For example, if you wish to have the GS buffers assigned as follows: </P>
<P CLASS="CodeExample">
<A NAME="pgfId-532709"></A>GS display1 register set ( DISPFB1=0x00000000_00004000,</P>
<P CLASS="CodeExample">
<A NAME="pgfId-532710"></A>DISPLAY1=0x00100180_00040080 )</P>
<P CLASS="CodeExample">
<A NAME="pgfId-532711"></A>GS display2 register set ( DISPFB1=0x00000000_00014080,</P>
<P CLASS="CodeExample">
<A NAME="pgfId-532712"></A>DISPLAY1=0x00100180_00080100 )</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532721"></A>the runtime option would be: </P>
<TABLE>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-532718"></A><STRONG CLASS="CodeOutput">
%</STRONG>
 <TT CLASS="Code">
ee</TT>
-run --gs-refresh1 <STRONG CLASS="CodeOutput">
0x12000070=0x0000000000004000:0x12000080=0x0010018000040080</STRONG>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CodeScreen">
<A NAME="pgfId-532720"></A>--gs-refresh2 <STRONG CLASS="CodeOutput">
0x12000070=0x0000000000014080:0x12000080=0x0010018000080100 </STRONG>
</P>
</TD>
</TR>
</TABLE>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532722"></A>Both <TT CLASS="Code">
--gs-refresh1</TT>
 and <TT CLASS="Code">
--gs-refresh2</TT>
 must be defined for the option to take effect.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-532724"></A><TT CLASS="Code">
--screen-refresh [on|off]</TT>
<A NAME="marker-532723"></A></P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532725"></A>Inserts a call to the GS refresh buffer (<TT CLASS="Code">
0x7f</TT>
) at the end of every primitive. The default value is <TT CLASS="Code">
off.</TT>
</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532726"></A>Note: The GS unit of the simulator displays the images onto the window when you write data to the address <TT CLASS="Code">
0x7f</TT>
 of GS (this is not compatible with the hardware).</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-532727"></A>If your program changes the draw buffer and the display buffer by every frame, and you use the simulator with <TT CLASS="Code">
--screen-refresh</TT>
 option, you should specify both buffers using the <TT CLASS="Code">
--gs-refresh1,2</TT>
 options. If you do not do this, the simulator may not display the image correctly.</P>
<P CLASS="BodyHang1">
<A NAME="pgfId-804499"></A><TT CLASS="Code">
--load-next </TT>
<A NAME="marker-804498"></A><VAR CLASS="CodeVariant">
&lt;exec&gt;</VAR>
</P>
<P CLASS="BodyListFollow">
<A NAME="pgfId-614090"></A>Specifies the name of the next program to be loaded. When the MIPS processor executes a <TT CLASS="Code">
break 0xfff1</TT>
 instruction the next program is loaded. The program entry point is returned in the register <TT CLASS="Code">
a0 ($4).</TT>
</P>
<TABLE>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
</TD>
</TR>
</TABLE>
<HR ALIGN="center">
<TABLE CLASS="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1">
<TR><TH COLSPAN="3" ALIGN="center">
<P CLASS="Gotos">Simulator</P>
</TH></TR>
<TR><TD  ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-15.html">
To&nbsp;main&nbsp;page</A></P></TD>
<TD  ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-21.html">
To&nbsp;previous&nbsp;page</A></P></TD>
<TD  ALIGN="center">
<P CLASS="Gotos">
<A HREF="ee-23.html">
To&nbsp;next&nbsp;page</A></P></TD>
</TR></TABLE>
</BODY>
</HTML>
