/* SCEI CONFIDENTIAL
 "PlayStation 2" Programmer Tool Runtime Library  Release 2.0
 */
/* 
 *              Emotion Engine Library Sample Program
 *
 *                         - bspline -
 *
 *                         Version 0.3.0
 *                           Shift-JIS
 *
 *      Copyright (C) 1998-1999 Sony Computer Entertainment Inc.
 *                        All Rights Reserved.
 *
 *          Name : b_data.dsm
 *          Description : vu1 packet template to draw b-spline surface. 
 *
 *       Version        Date            Design      Log
 *  --------------------------------------------------------------------
 *       0.3.0          Jun,1,1999     munekis     first version
 */

.include "vumacros.h"
.global My_dma_setting
.global My_dma_start1
.global My_dma_start2
.global B_matrix
.global B_blending

.global My_bspline_start
.global My_bspline_end
.global My_reftag
.global My_light




.data
.align 4
My_dma_setting:
.DmaPackVif 0

DMAcnt *
STCYCL 4, 4
STMASK 0
STMOD 0
.EndDmaData

DMAcnt *
MPG 0,*
;.include "b.vsm"
.include "b_opt.vsm"
.EndMPG
.EndDmaData
DMAend

.align 4
My_dma_start1:
DMAcnt *
;------------------------------------------------------------
unpack 4, 4, V4_32, 0, *; Screen Matrix
B_matrix:
fwzyx 0.000000, 0.000000, 0.000000, 35.752483
fwzyx 0.000000, 0.000000, -14.765776, 0.000000
fwzyx 0.050000, 4995000.000000, 102.400002, 102.400002
fwzyx 1.000000, 100000000.000000, 2048.000000, 2048.000000
.EndUnpack
;------------------------------------------------------------
unpack 4, 4, V4_32, 4, *; COLOR RGBA.
fxyzw 220.0, 220.0, 190.0, 127.0  
My_light:
fxyzw 1.25, 0.0, 0.0, 0.0
fxyzw 1.25, 0.0, 0.0, 0.0
fxyzw 0.0, 0.0, 0.0, 0.0
fxyzw 40.0, 40.0, 40.0, 127.0
fxyzw 255.0, 255.0, 255.0, 127.0
.EndUnpack
;------------------------------------------------------------
unpack 4, 4, V4_32, 10, *; Blending Coeff.
B_blending:
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
fwzyx 0.000000, 0.000000, 0.000000, 0.0000000
.EndUnpack
.EndDmaData
DMAend

My_dma_start2:
.align 4
DMAcnt *
BASE 130
OFFSET 420	; sets the vif1 offset register
MSCAL 0 	

.EndDmaData

My_reftag:
DMARef *, splinedata1
DMAend

;---------------------------------------------------
.align 4
My_bspline_start:
.DmaData splinedata1
unpack[r] 4, 4, V4_32, 0, *
;iwzyx 0x00000000, 0x00000421, 0x30014000, 0x00008078 ; line-strip
iwzyx 0x00000000, 0x00000421, 0x300e4000, 0x00008078 ; triangle-strip with texture
;iwzyx 0x00000000, 0x00000421, 0x30064000, 0x00008078 ; triangle-strip without texture
.EndUnpack
unpack[r] 4, 4, V4_32, 1, *
fxyzw 1.0000, 2.0000, 3.0000, 4.0000 ; ---- value ST origin ---

fxyzw 0.0000, 0.0000, 0.0000, 1.0000 ; ---- control points ----
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000
fxyzw 0.0000, 0.0000, 0.0000, 1.0000

.EndUnpack
MSCNT  	

.EndDmaData
My_bspline_end:
DMAend
