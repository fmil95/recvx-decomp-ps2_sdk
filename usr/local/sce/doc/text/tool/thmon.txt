[SCEI CONFIDENTIAL DOCUMENT]
"PlayStation 2" Programmer Tool Runtime Library Release 2.0
                  Copyright (C) 2000 by Sony Computer Entertainment Inc.
                                                     All Rights Reserved

簡易スレッドモニタ
===================

    

 1 ライブラリ概要
------------------


  1.1 概要

    DTL-T10000 の boot rom(フラッシュモード) には、IOP のスレッドに関する
    簡単な監視プログラムが格納されています。
    以下の方法でIOPのスレッドの状態をモニタリングすることが出来ます。

  1.2 起動方法

    以下のように dsicons を TTY9 専用に起動しておきます。
    
        % dsicons 9
    
    さらに別のウインドウで dsicons を TTYK 専用に起動しておくと便利です。
    （これは必須ではありません。）
    
        % dsicons k
    
    次に dsidb か dsistart で 'rom:THMON' を起動します。
    
      dsidb の場合
    
        dsidb R> mstart rom:THMON
    
      dsistart の場合
    
        % dsistart rom:THMON
    
    以上により、最初に起動した dsicons のウインドウで以下のような表示があ
    り、コマンド入力によりスレッドに関する情報の表示が可能になります。
    
        ========= simple thread monitor program =========
        help command is 'help'
         >

  1.3 使用方法

    dsicons 9 のウインドウに、' > ' というプロンプトが表示されますので、
    下記のコマンドを入力してください。
    なお、'/' 一文字を入力して RETURN キーを押すと直前に入力したコマンド
    を再実行します。
    

    help -- ヘルプコマンド

      コマンドの一覧と簡単な説明を表示します。
      

    thlist -- スレッドの一覧の表示

      存在するスレッドの一覧を表示します。
      -v オプションを付加すると、スレッドのエントリ関数の所属するモジュー
      ルのモジュール名と、スタックの未使用サイズの推定値（正確ではありま
      せん）も表示されます。
      通常は DORMANT 状態のスレッドは表示されませんが、-a オプションを指
      定すると DORMANT 状態のスレッドも表示されます。
      また、引数にスレッドIDを指定することで、特定のスレッドに関する情報
      のみ表示することも可能です。
      

    rdlist -- READY スレッドの一覧の表示

      READY 状態のスレッドの一覧を表示します。
      -v オプションを付加すると、スレッドのエントリ関数の所属するモジュー
      ルのモジュール名と、スタックの未使用サイズの推定値（正確ではありま
      せん）も表示されます。
      

    sllist -- SLEEP スレッドの一覧の表示

      SleepThread により WAIT状態にあるスレッドの一覧を表示します。
      -v オプションを付加すると、スレッドのエントリ関数の所属するモジュー
      ルのモジュール名と、スタックの未使用サイズの推定値（正確ではありま
      せん）も表示されます。
      

    dllist -- DELAY スレッドの一覧の表示

      DelayThread により WAIT状態にあるスレッドの一覧を表示します。
      -v オプションを付加すると、スレッドのエントリ関数の所属するモジュー
      ルのモジュール名と、スタックの未使用サイズの推定値（正確ではありま
      せん）も表示されます。
      

    rtlist -- スレッドの稼働時間の累計／稼働率の表示

      稼働中のスレッドの CPU使用時間の累計を表示します。（引数が無い場合）
      -v オプションを付加すると、スレッドのエントリ関数の所属するモジュー
      ルのモジュール名も表示します。
      現在この累計時間には、割り込み処理時間が繰り込まれていてあまり正確
      なものではありませんが、おおよその目安にはなります。
      引数に回数を指定することで、１秒置きに稼働中のスレッドの CPU使用率
      を表示します。指定した回数表示した後コマンドは終了します。
      

    semlist -- セマフォの一覧の表示

      存在するセマフォの一覧を表示します。
      

    evlist -- イベントフラグの一覧の表示

      存在するイベントフラグの一覧を表示します。
      

    cpuwatch -- CPU 使用率の表示開始

      全スレッドの合計の CPU 使用率の表示を開始します。
      表示は Kprint() で行われ、別のウインドウで動いている dsicons に表示
      されます。
      １秒当りのサンプル数を指定することができます。デフォルトでは １秒当
      り１０回測定します。
      サンプル数に 0 を指定すると、表示が止まります。
      -b オプションを指定すると、バー表示を行います。
      -br オプションを指定すると、改行の無いバー表示を行います。
      

    thwatch -- 特定のスレッドのCPU 使用率の表示開始

      指定したスレッドの CPU 使用率の表示を開始します。
      表示は Kprint() で行われ、別のウインドウで動いている dsicons に表示
      されます。
      １秒当りのサンプル数を指定することができます。デフォルトでは １秒当
      り１０回測定します。
      サンプル数に 0 を指定すると、表示が止まります。
      -b オプションを指定すると、バー表示を行います。
      -br オプションを指定すると、改行の無いバー表示を行います。
