<HTML>

<!-- 見出し 1,部見出し -->
<HEAD>
<TITLE> パフォーマンスカウンタライブラリ</TITLE>
</HEAD>
<TABLE WIDTH="100%">
<TR><TD>
<H4>"PlayStation 2"Programmer Tool Runtime Library Release 2.0</H4>
</TD></TR></TABLE>
<HR NOSHADE SIZE=5>
<DIV align=center><H1>パフォーマンスカウンタライブラリ</H1></DIV>
<P>
</TR></TABLE>
</blockquote>

<!-- 見出し 2,章見出し -->
<A NAME="Heading2">
<H3>
<A HREF="#Top"><IMG SRC = ./gif/link.gif BORDER = 0></A>関数一覧
<HR>
</H3>
</A>
<blockquote>

<TABLE CELLPADDING=0>
<TR><TD></TD><TD>
<A HREF=#scePcGetCounter0>scePcGetCounter0 </A><BR>
</TD><TD> </TD>
<TD>カウンタ 0 の値の取得</TD></TR>
<TR><TD></TD><TD>
<A HREF=#scePcGetCounter1>scePcGetCounter1 </A><BR>
</TD><TD> </TD>
<TD>カウンタ 1 の値の取得</TD></TR>
<TR><TD></TD><TD>
<A HREF=#scePcStart>scePcStart </A><BR>
</TD><TD> </TD>
<TD>Performance Counter による計測開始</TD></TR>
<TR><TD></TD><TD>
<A HREF=#scePcStop>scePcStop </A><BR>
</TD><TD> </TD>
<TD>Performance Counter の停止</TD></TR>
</TABLE>
</blockquote>
<DIV align="center">
<BODY BGCOLOR=#ffffff TEXT=#000000 LINK=#0000ff ALINK=#ffff00 VLINK=#800080>
</DIV>
<DIV align="center">
</DIV>
</blockquote>
<HR border=1 width=100%><BR><BR>
<DIV align=center>
<U><H2>関数</H2></U>
</DIV>
<A name=scePcGetCounter0>
<HR NOSHADE SIZE="8">
<!-- 関数名 -->
<TABLE border=0 width=100% cellspacing=0 cellpadding=0><TR><TD valign=bottom>
<H1>scePcGetCounter0
</TD><TD align=right valign=bottom><A HREF=#top><IMG src=gif/link.gif border=0></A>
</TD></TR>
<TR><TD colspan=2 bgcolor=#336699><IMG src=gif/spacer.gif></TD></TR></TABLE>
<!-- 関数説明 -->
<DIV ALIGN="right">
        カウンタ 0 の値の取得
</DIV><P>

<!-- 形式 -->
<B>形式</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>int <B>scePcGetCounter0</B>(void)
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 引数 -->
<B>引数</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>なし
        </BLOCKQUOTE>
</PRE>
</blockquote>

<!-- 返り値 -->
<B>返り値</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    カウンタ 0 の値 <BR>
<BR>
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 解説 -->
<B>解説</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    カウンタ 0 の値を取得します。 <BR>
<BR>
        </BLOCKQUOTE>
</blockquote>
<A name=scePcGetCounter1>
<HR NOSHADE SIZE="8">
<!-- 関数名 -->
<TABLE border=0 width=100% cellspacing=0 cellpadding=0><TR><TD valign=bottom>
<H1>scePcGetCounter1
</TD><TD align=right valign=bottom><A HREF=#top><IMG src=gif/link.gif border=0></A>
</TD></TR>
<TR><TD colspan=2 bgcolor=#336699><IMG src=gif/spacer.gif></TD></TR></TABLE>
<!-- 関数説明 -->
<DIV ALIGN="right">
        カウンタ 1 の値の取得
</DIV><P>

<!-- 形式 -->
<B>形式</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>int <B>scePcGetCounter1</B>(void)
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 引数 -->
<B>引数</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>なし
        </BLOCKQUOTE>
</PRE>
</blockquote>

<!-- 返り値 -->
<B>返り値</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    カウンタ 1 の値 <BR>
<BR>
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 解説 -->
<B>解説</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    カウンタ 1 の値を取得します。 <BR>
<BR>
        </BLOCKQUOTE>
</blockquote>
<A name=scePcStart>
<HR NOSHADE SIZE="8">
<!-- 関数名 -->
<TABLE border=0 width=100% cellspacing=0 cellpadding=0><TR><TD valign=bottom>
<H1>scePcStart
</TD><TD align=right valign=bottom><A HREF=#top><IMG src=gif/link.gif border=0></A>
</TD></TR>
<TR><TD colspan=2 bgcolor=#336699><IMG src=gif/spacer.gif></TD></TR></TABLE>
<!-- 関数説明 -->
<DIV ALIGN="right">
        Performance Counter による計測開始
</DIV><P>

<!-- 形式 -->
<B>形式</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>void <B>scePcStart</B>(
	int <I>control</I>,
	int <I>counter0</I>,
	int <I>counter1</I>
)
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 引数 -->
<B>引数</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE><I>control</I>		カウントしたいイベント等の設定値
<I>counter0</I>		カウンタ 0 の初期値
<I>counter1</I>		カウンタ 1 の初期値
        </BLOCKQUOTE>
</PRE>
</blockquote>

<!-- 返り値 -->
<B>返り値</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    なし <BR>
<BR>
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 解説 -->
<B>解説</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    パフォーマンスカウンタによる計測を開始します。 <BR>
<BR>
    control には、それぞれのカウンタ毎に計測したいイベントとそのイベントを計測したいプロセッサモードの論理和を指定します。カウンタ・イネーブルもあわせて指定します。イベント値につきましては、イベントコードを参照してください。プロセッサモード値とカウンタ・イネーブルは以下のようになります。 <BR>
<BR>
    SCE_PC_EXL0	(1  &lt;&lt;  1)	// exception	mode for counter0 <BR>
    SCE_PC_K0	(1  &lt;&lt;  2)	// kernel	mode for counter0 <BR>
    SCE_PC_S0	(1  &lt;&lt;  3)	// supervisor	mode for counter0 <BR>
    SCE_PC_U0	(1  &lt;&lt;  4)	// user	mode for counter0 <BR>
    SCE_PC_EXL1	(1  &lt;&lt; 11)	// exception	mode for counter1 <BR>
    SCE_PC_K1	(1  &lt;&lt; 12)	// kernel	mode for counter1 <BR>
    SCE_PC_S1	(1  &lt;&lt; 13)	// supervisor	mode for counter1 <BR>
    SCE_PC_U1	(1  &lt;&lt; 14)	// user	mode for counter1 <BR>
<BR>
    SCE_PC_CTE	(1  &lt;&lt; 31)	// counter enable <BR>
<BR>
    カウンタ・イネーブルを指定しない場合には計測は開始されません。 <BR>
<BR>
    たとえば、カウンタ 0 でプロセッササイクルを全てのモードで、カウンタ 1 で D$ ミスをユーザーモードのみで計測したい場合のcontrol の値は以下のコードで表すことができます。 <BR>
<BR>
    control  = SCE_PC0_CPU_CYCLE | (SCE_PC_U0|SCE_PC_S0|SCE_PC_K0| <BR>
    SCE_PC_EXL0); <BR>
    control |= SCE_PC1_DCACHE_MISS | (SCE_PC_U1); <BR>
    control |= SCE_PC_CTE; <BR>
<BR>
    カウンタ 0/1 の内ひとつしか使用しない場合は、使用しない方のカウンタイベントには必ず NO_EVENT を指定してください。 <BR>
<BR>
        </BLOCKQUOTE>
</blockquote>
<A name=scePcStop>
<HR NOSHADE SIZE="8">
<!-- 関数名 -->
<TABLE border=0 width=100% cellspacing=0 cellpadding=0><TR><TD valign=bottom>
<H1>scePcStop
</TD><TD align=right valign=bottom><A HREF=#top><IMG src=gif/link.gif border=0></A>
</TD></TR>
<TR><TD colspan=2 bgcolor=#336699><IMG src=gif/spacer.gif></TD></TR></TABLE>
<!-- 関数説明 -->
<DIV ALIGN="right">
        Performance Counter の停止
</DIV><P>

<!-- 形式 -->
<B>形式</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>void <B>scePcStop</B>(void)
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 引数 -->
<B>引数</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
<PRE>なし
        </BLOCKQUOTE>
</PRE>
</blockquote>

<!-- 返り値 -->
<B>返り値</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    なし <BR>
<BR>
        </BLOCKQUOTE>
</PRE>
</PRE>
</blockquote>

<!-- 解説 -->
<B>解説</B>
<HR NOSHADE ALIGN="left" SIZE=2 WIDTH=20%>
<blockquote>
        <BLOCKQUOTE>
    パフォーマンスカウンタを停止します。 <BR>
</BLOCKQUOTE>
</blockquote>
<A HREF="#Top"><IMG SRC = gif/link.gif BORDER = 0></A>
<HR>
<DIV ALIGN="right">
    Copyright (c) 2000 Sony Computer Entertainment Inc.  All Rights Reserved.<BR>
    SCEI CONFIDENTIAL
</DIV>
</BODY>
</HTML>
