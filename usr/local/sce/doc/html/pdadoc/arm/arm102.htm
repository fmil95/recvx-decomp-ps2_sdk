<HTML>
<HEAD>
  <META NAME="GENERATOR" CONTENT="Adobe PageMill 3.0J Win">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=x-sjis">
  <TITLE>arm1_2</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">

<P><A HREF="arm_gtoc.htm">[総目次]</A> <A HREF="arm100.htm">[章目次]</A>
<A HREF="arm101.htm">[前]</A> <A HREF="arm103.htm">[次]</A> <A 
HREF="arm_inde.htm">[インデックス]</A></P>

<H2><FONT COLOR="#996633">ARM Architecture Reference Manual</FONT><BR>
<HR ALIGN=LEFT></H2>

<H3>1.2 例外</H3>

<BLOCKQUOTE>
  <P>ARMは5種類の例外と各例外に対応する<A NAME="anchor1917732"></A>特権処理モードをサポートしています。5種類の例外は以下のとおりです。</P>
  <UL>
    <LI>2レベル（高速と標準）の割り込み<A NAME="anchor3587368"></A>
    <LI>メモリ・アボート<A NAME="anchor1735387"></A>（<A NAME="anchor1736484"></A>メモリ保護または<A
    NAME="anchor1737984"></A>仮想メモリのインプリメントに使用）
    <LI><A NAME="anchor498969"></A>未定義命令の実行試行
    <LI><A NAME="anchor93616"></A>ソフトウェア割り込み（SWI）（オペレーティング・システムへのコールに使用）
  </UL>
  <P>例外が発生すると、一部の標準のレジスタが例外モード専用のレジスタに置き換えられます。すべての例外に、R14とR13のための<A
  NAME="anchor1981026"></A>置き換え（すなわちバンクされた）レジスタが用意されており、また1つの割り込みモードは高速割り込み処理のためにさらに多くのレジスタを用意しています。</P>
  <P>例外発生後、R14は例外処理のためのリターン・アドレスを保持し、このアドレスは例外処理後の復帰と、例外を引き起こした命令のアドレス指定の両方に使用されます。</P>
  <P>R13は、例外モードを通してバンクされ、各例外<A NAME="anchor3520317"></A>ハンドラに専用<A
  NAME="anchor129306"></A>スタック・ポインタ（SP）を提供します。高速割り込みモードでは、更にレジスタ8〜12がバンクされているため、割り込み処理はこれらのレジスタを保存またはリストアせずに開始できます。7番目の処理モードのシステム・モードには、バンクされたレジスタはありません（<A
  NAME="anchor514359"></A>ユーザ・モードのレジスタを使用します）。システム・モードは、特権プロセッサ・モードを必要とする通常の（例外ではない）タスクを実行するのに使用されます。</P>
  <H5><A NAME="anchor3216970"></A>CPSRとSPSR</H5>
  <P>他すべてのプロセッサ状態は、ステータス・レジスタに保持されます。現在動作中のプロセッサの状態は、カレント・プログラム・ステータス・レジスタ（CPSR）に保持されます。CPSRには以下のビットがあります。</P>
  <UL>
    <LI>4つの<A NAME="anchor3011339"></A>コンディション・コード・フラグ（ネガティブ、ゼロ、キャリー、オーバーフロー）
    <LI>2つの割り込み<A NAME="anchor4039017"></A>ディスエーブル・ビット（割り込みのタイプごとに1つずつ）
    <LI>現在の<A NAME="anchor1881234"></A>プロセッサ・モードをエンコードする5つのビット
  </UL>
  <P>5つのすべての例外モードには、Saved Program Status Register（SPSR）があり、例外が発生した直前のCPSRを保持します。CPSRとSPSRには、特別な命令でアクセスします。</P>
  <H5>例外処理</H5>
  <P>例外が発生すると、ARMは現在の命令の後で実行を停止し、例外<A NAME="anchor530808"></A>ベクタと呼ばれる下位メモリの固定アドレスで例外の処理を開始します。例外ごとに個別のベクタ・ロケーションがあります（さらに、データ・アクセスと命令アクセスを識別するメモリ・アボート用に2つのベクタ・ロケーションがあります）。</P>
  <P><A NAME="anchor1836247"></A>オペレーティング・システムは、初期化時に例外ごとにハンドラをインストールします。特権オペレーティング・システム・タスクは、通常システム・モードで実行されるので、状態を保持したまま、オペレーティング・システム内で例外を発生させることができます（例外が発生すると、R14が上書きされます。システム・モードは例外によって入ることができない唯一の特権モードです）。<BR>
  </P>
</BLOCKQUOTE>

<P><HR ALIGN=LEFT><BR>
<A HREF="arm_gtoc.htm">[総目次]</A> <A HREF="arm100.htm">[章目次]</A>
<A HREF="arm101.htm">[前]</A> <A HREF="arm103.htm">[次]</A> <A 
HREF="arm_inde.htm">[インデックス]</A>

</BODY>
</HTML>
