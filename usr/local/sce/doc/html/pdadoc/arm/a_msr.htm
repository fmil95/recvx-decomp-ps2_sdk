<HTML>
<HEAD>
  <META NAME="GENERATOR" CONTENT="Adobe PageMill 3.0J Win">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=x-sjis">
  <TITLE>arm_msr</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">

<P><A HREF="arm_gtoc.htm">[総目次]</A> <A HREF="arm300.htm">[章目次]</A>
<A HREF="a_mrs.htm">[前]</A> <A HREF="a_mul.htm">[次]</A> <A HREF="arm_inde.htm">[インデックス]</A></P>

<H2><FONT COLOR="#996633">ARM Architecture Reference Manual</FONT><BR>
<HR ALIGN=LEFT></H2>

<H1><FONT COLOR="#ff0000">MSR</FONT></H1>

<BLOCKQUOTE>
  <P><TABLE WIDTH="90%" BORDER="1" CELLSPACING="2" CELLPADDING="0">
    <TR>
      <TD WIDTH="50%" HEIGHT="38">
      <H3><FONT COLOR="#999999">機能説明</FONT></H3>
</TD>
      <TD WIDTH="50%">
      <B>ステータス・レジスタ・アクセス</B></TD> 
    </TR>
    <TR>
      <TD WIDTH="50%" HEIGHT="47">
      <B><FONT COLOR="#999999">アーキテクチャ</FONT></B></TD> 
      <TD WIDTH="50%">
      <B>アーキテクチャｖ3、ｖ4のみ</B></TD> 
    </TR>
  </TABLE></P>
  <H2><FONT COLOR="#009999">MSR{&lt;cond&gt;} CPSR_&lt;fields&gt;,
  #32bit immediate MSR{&lt;cond&gt;} CPSR_&lt;fields&gt;,Rm<BR>
  MSR{&lt;cond&gt;} SPSR_&lt;fields&gt;, #32bit immediate MSR{&lt;cond&gt;}
  SPSR_&lt;fields&gt;,Rm</FONT></H2>
</BLOCKQUOTE>

<H4>説明</H4>

<BLOCKQUOTE>
  <P>MSR(Move to Status register from ARM Register) 命令は、汎用レジスタの値をCPSPまたは、現在のモードのCPSRまたはSPSRに転送します。この命令は<A
  NAME="anchor3028249"></A>コンディション・コード・フラグ、割り込みイネーブル<A NAME="anchor4053418"></A>、または<A
  NAME="anchor1892406"></A>プロセッサ・モードの値を更新するために使用されます。</P>
  <P>MSRはRmの値または32ビット・イミディエイト値（ローテートで8ビット値としてエンコードされたもの）をCPSRまたは現在のモードに対応するSPSRに移動します。</P>
  <P>この命令は、命令で指定された条件がコンディション・コードのステータスと一致した場合にのみ実行されます。条件は、<A
  HREF="arm303.htm">3.3</A>「コンディション・フィールド」で定義されています。</P>
  <P><B>イミディエイト・オペランド</B></P>
</BLOCKQUOTE>

<P><TABLE BORDER="1" CELLSPACING="2" CELLPADDING="0">
  <TR>
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532448"></A><B>31</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532450"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532452"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532454"></A><B>28</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532456"></A><B>27</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532458"></A><B>26</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532460"></A><B>25</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532462"></A><B>24</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532464"></A><B>23</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532466"></A><B>22</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532468"></A><B>21</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532470"></A><B>20</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532472"></A><B>19</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532474"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532476"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532478"></A><B>16</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532480"></A><B>15</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532482"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532484"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532486"></A><B>12</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532488"></A><B>11</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532490"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532492"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532494"></A><B>8</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532496"></A><B>7</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532498"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532500"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532502"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532504"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532506"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532508"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532510"></A><B>0</B></TD> 
  </TR>
  <TR>
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532512"></A><BR>
    cond</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532520"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532522"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532524"></A><BR>
    1</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532526"></A><BR>
    1</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532528"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532530"></A><BR>
    R</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532532"></A><BR>
    1</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532534"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532536"></A><BR>
    field_mask</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532544"></A><BR>
    SBO</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532552"></A><BR>
    rotate_imm</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="8">
    <A NAME="1532560"></A><BR>
    8_bit_immediate</TD>
     
  </TR>
</TABLE></P>

<BLOCKQUOTE>
  <P><B>レジスタ・オペランド</B></P>
</BLOCKQUOTE>

<P><TABLE BORDER="1" CELLSPACING="2" CELLPADDING="0">
  <TR>
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532711"></A><B>31</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532713"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532715"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532717"></A><B>28</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532719"></A><B>27</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532721"></A><B>26</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532723"></A><B>25</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532725"></A><B>24</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532727"></A><B>23</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532729"></A><B>22</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532731"></A><B>21</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532733"></A><B>20</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532735"></A><B>19</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532737"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532739"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532741"></A><B>16</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532743"></A><B>15</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532745"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532747"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532749"></A><B>12</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532751"></A><B>11</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532753"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532755"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532757"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532759"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532761"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532763"></A><B>5</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532765"></A><B>4</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532767"></A><B>3</B></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532769"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532771"></A><FONT COLOR="#ffffff">-</FONT></TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532773"></A><B>0</B></TD> 
  </TR>
  <TR>
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532775"></A><BR>
    cond</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532783"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532785"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532787"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532789"></A><BR>
    1</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532791"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532793"></A><BR>
    R</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532795"></A><BR>
    1</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532797"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532799"></A><BR>
    field_mask</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532807"></A><BR>
    SBO</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="7">
    <A NAME="1532815"></A><BR>
    SBZ</TD>
     
    <TD ALIGN="CENTER" VALIGN="TOP">
    <A NAME="1532829"></A><BR>
    0</TD> 
    <TD ALIGN="CENTER" VALIGN="TOP" COLSPAN="4">
    <A NAME="1532831"></A><BR>
    Rm</TD>
     
  </TR>
</TABLE></P>

<H4>オペレーション</H4>

<BLOCKQUOTE>
  <PRE>if ConditionPassed(&lt;cond&gt;) then
        if opcode[25] == 1
                &lt;operand&gt; = &lt;8_bit_immediate&gt; Rotate_Right (&lt;rotate_imm&gt; * 2)
        else /* opcode[25] == 0 */
                &lt;operand&gt; = Rm
        if R == 0 then
                if &lt;field_mask&gt;[0] == 1 and InAPrivilegedMode() then
                        CPSR[7:0] = &lt;operand&gt;[7:0]
                if &lt;field_mask&gt;[1] == 1 and InAPrivilegedMode() then
                        CPSR[15:8] = &lt;operand&gt;[15:8]
                if &lt;field_mask&gt;[2] == 1 and InAPrivilegedMode() then
                        CPSR[23:16] = &lt;operand&gt;[23:16]
                if &lt;field_mask&gt;[3] == 1 then
                        CPSR[31:24] = &lt;operand&gt;[31:24]
        else /* R == 1 */
                if &lt;field_mask&gt;[0] == 1 and CurrentModeHasSPSR() then
                        SPSR[7:0] = &lt;operand&gt;[7:0]
                if &lt;field_mask&gt;[1] == 1 and CurrentModeHasSPSR() then
                        SPSR[15:8] = &lt;operand&gt;[15:8]
                if &lt;field_mask&gt;[2] == 1 and CurrentModeHasSPSR() then
                        SPSR[23:16] = &lt;operand&gt;[23:16]
                if &lt;field_mask&gt;[3] == 1 and CurrentModeHasSPSR() then
                        SPSR[31:24] = &lt;operand&gt;[31:24]</PRE>
</BLOCKQUOTE>

<H4>例外</H4>

<BLOCKQUOTE>
  <P>なし</P>
</BLOCKQUOTE>

<H4>修飾子</H4>

<BLOCKQUOTE>
  <P>コンディション・コード</P>
  <P>&lt;fields&gt;は以下のいずれかです。</P>
  <P><TABLE WIDTH="450" BORDER="1" CELLSPACING="2" CELLPADDING="0">
    <TR>
      <TD WIDTH="12%">
      _c</TD> 
      <TD WIDTH="88%">
      制御フィールド・マスク・ビットをセットします。（ビット０）</TD> 
    </TR>
    <TR>
      <TD WIDTH="12%">
      _x</TD>
      <TD WIDTH="88%">
      拡張フィールド・マスク・ビットをセットします。（ビット１）</TD> 
    </TR>
    <TR>
      <TD WIDTH="12%">
      _s</TD>
      <TD WIDTH="88%">
      ステータス・フィールド・マスク・ビットをセットします。（ビット２）</TD> 
    </TR>
    <TR>
      <TD WIDTH="12%">
      _f</TD>
      <TD WIDTH="88%">
      フラグ・フィールド・マスク・ビットをセットします。（ビット３）</TD> 
    </TR>
  </TABLE></P>
</BLOCKQUOTE>

<H4>注記</H4>

<BLOCKQUOTE>
  <P><B>イミディエイト・オペランド：</B>この命令のイミディエイト形式は、フラグ・ビット（PSRビット31:24）をセットするためにのみ使用できます。その他のフィールドでイミディエイト形式を使用した場合、結果は予測できません。</P>
  <P><B>PSR更新：</B>PSRの値は、PSRを汎用レジスタに移動する（MRS命令を使用して）、汎用レジスタの関連ビットを変更する、そして更新した汎用レジスタ値をPSRにリストアする（MSR命令を使用して）ことによって更新しなければなりません。</P>
  <P><B>ユーザ・モードのCPSR：</B>ユーザ・モードでのCPSR[23:0]への書き込みは無視されます（ユーザ・モード・プログラムが特権モードに移行できないようにするため）。</P>
  <P><B>ユーザ・モードのSPSR：</B>ユーザ・モードでSPSRにアクセスした場合、結果は予測できません。</P>
  <P><B>システム・モードのSPSR：</B>システム・モードでSPSRにアクセスした場合、結果は予測できません。</P>
  <P><B>フィールド指定の変更：</B>CPSR、CPSR_flg、CPSR_ctl、CPSR_all、SPSR、SPSR_flg、SPSR_ctl、およびSPSR_all形式のPSRフィールド指定は、上記のcsxf形式に置き換えられています。</P>
  <P>CPSR、SPSR、CPSR_all、SPSR_allは、0b1001のフィールド・マスクを生成します。<BR>
  CPSR_flgおよびSPSR_flgは、0b1000のフィールド・マスクを生成します。<BR>
  CPSR_ctlおよびSPSR_ctlは、0b0001のフィールドマスクを生成します。</P>
</BLOCKQUOTE>

<P><HR ALIGN=LEFT><BR>
<A HREF="arm_gtoc.htm">[総目次]</A> <A HREF="arm300.htm">[章目次]</A>
<A HREF="a_mrs.htm">[前]</A> <A HREF="a_mul.htm">[次]</A> <A HREF="arm_inde.htm">[インデックス]</A>

</BODY>
</HTML>
